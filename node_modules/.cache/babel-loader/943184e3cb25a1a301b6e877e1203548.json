{"remainingRequest":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/babel-loader/lib/index.js!/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sakthivel/Desktop/movies-app/world-movies/src/pages/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/src/pages/Home.vue","mtime":1583311184384},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Object$keys from \"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport movies from \"../data/movies.json\";\nimport MovieThumb from \"../components/movie-thumb.vue\";\nimport { GENRES, LANGUAGES, CONTAIN_SEARCH } from '../constants';\nexport default {\n  name: \"Home\",\n  components: {\n    MovieThumb: MovieThumb\n  },\n  data: function data() {\n    return {\n      movies: movies,\n      filteredMoives: movies.slice(),\n      GENRES: GENRES,\n      LANGUAGES: LANGUAGES,\n      isFilterApplied: false,\n      filters: {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      },\n      bricklayer: null\n    };\n  },\n  beforeCreate: function beforeCreate() {\n    if (!this.$parent.isAuthenticated) {\n      this.$router.push({\n        path: '/'\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      if (this.$parent.isAuthenticated && this.movies.length) {//this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n      }\n    });\n  },\n  methods: {\n    bricklayerInit: function bricklayerInit() {\n      if (this.bricklayer) {\n        this.bricklayer.destroy();\n      }\n\n      this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n    },\n    onFilter: function onFilter(e) {\n      var validFilters = {};\n\n      for (var key in this.filters) {\n        if (this.filters[key]) {\n          validFilters[key] = this.filters[key];\n        }\n      }\n\n      var newFilteredMovies = [];\n\n      if (_Object$keys(validFilters).length) {\n        var _this$filteredMoives;\n\n        newFilteredMovies = this.movies.filter(function (item) {\n          for (var _key in validFilters) {\n            var isContainSearch = CONTAIN_SEARCH.includes(_key);\n\n            if (isContainSearch) {\n              if (!item[_key] || !item[_key].toLowerCase().includes(validFilters[_key].toLowerCase())) {\n                return false;\n              }\n            } else if (!item[_key] || item[_key].toLowerCase() != validFilters[_key].toLowerCase()) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n        this.isFilterApplied = true;\n\n        (_this$filteredMoives = this.filteredMoives).splice.apply(_this$filteredMoives, [0, this.filteredMoives.length].concat(_toConsumableArray(newFilteredMovies))); //this.bricklayerInit();\n\n      } else {\n        var _this$filteredMoives2;\n\n        this.isFilterApplied = false;\n\n        (_this$filteredMoives2 = this.filteredMoives).splice.apply(_this$filteredMoives2, [0, this.filteredMoives.length].concat(_toConsumableArray(this.movies))); //this.bricklayerInit();\n\n      }\n\n      e.preventDefault();\n    },\n    clearFilter: function clearFilter(e) {\n      var _this$filteredMoives3;\n\n      this.filters = {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      };\n      this.isFilterApplied = false;\n\n      (_this$filteredMoives3 = this.filteredMoives).splice.apply(_this$filteredMoives3, [0, this.filteredMoives.length].concat(_toConsumableArray(this.movies)));\n\n      e.preventDefault();\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <section class=\"hero is-primary\">\n      <div class=\"hero-body\">\n        <div class=\"container\">\n          <h1 class=\"title has-text-centered\">World Movies</h1>\n        </div>\n      </div>\n    </section>\n    <div class=\"hero is-light\">\n      <div class=\"container\">\n        <div class=\"section relative\">\n          <form class=\"columns\" @submit=\"onFilter\">\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by title</label>\n                <input name=\"filter-by-title\" class=\"input\" type=\"text\" v-model=\"filters.Title\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Year</label>\n                <input name=\"filter-by-year\" class=\"input\" type=\"text\" v-model=\"filters.Year\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by director</label>\n                <input name=\"filter-by-director\" class=\"input\" type=\"text\" v-model=\"filters.Director\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Genre</label>\n                <br>\n                <div class=\"select is-fullwidth\">\n                  <select name=\"filter-by-genre\" v-model=\"filters.Genre\">\n                    <option disabled value=\"\">Select one</option>\n                    <option v-for=\"(genre, i) in GENRES\" :key=\"i\" :value=\"genre.id\">{{genre.name}}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Language</label>\n                <br>\n                <div class=\"select is-fullwidth\">\n                  <select name=\"filter-by-language\" v-model=\"filters.Language\">\n                    <option disabled value=\"\">Select one</option>\n                    <option v-for=\"(language, i) in LANGUAGES\" :key=\"i\" :value=\"language.id\">{{language.name}}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <label>&nbsp;</label>\n              <div class=\"field table remove-bg\">\n                <button name=\"filter\" class=\"button is-primary mr1\" type=\"submit\">Filter</button>\n                &nbsp;<a class=\"has-text-grey underline table-cell align-middle h5\" v-on:click=\"clearFilter\" v-if=\"isFilterApplied\" data-cy=\"clear-filter\">X Clear filter</a> \n              </div>\n            </div>\n          </form>\n          <div class=\"absolute has-text-info\" v-if=\"isFilterApplied && filteredMoives.length\">\n             Filter result: {{filteredMoives.length}} movie(s) found...\n            </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"section\">\n        <div class=\"bricklayer columns\">\n          <p v-if=\"!filteredMoives.length\">\n            No movies found...\n          </p>\n          <div class=\"column is-4\" v-for=\"(movie, i) in filteredMoives\" :key=\"i\">\n            <MovieThumb :movie=\"movie\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style src=\"../assets/libs/bricklayer/bricklayer.css\"></style>\n\n<script>\nimport movies from \"../data/movies.json\";\nimport MovieThumb from \"../components/movie-thumb.vue\";\nimport { GENRES, LANGUAGES, CONTAIN_SEARCH } from '../constants';\n\nexport default {\n  name: \"Home\",\n  components: {\n    MovieThumb\n  },\n  data() {\n    return {\n      movies: movies,\n      filteredMoives: movies.slice(),\n      GENRES: GENRES,\n      LANGUAGES: LANGUAGES,\n      isFilterApplied: false,\n      filters: {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      },\n      bricklayer: null\n    };\n  },\n  beforeCreate: function() {\n    if(!this.$parent.isAuthenticated) {\n      this.$router.push({ path: '/' });\n    }\n  },\n  mounted: function() {\n    this.$nextTick(function() {\n        if(this.$parent.isAuthenticated && this.movies.length) {\n          //this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n        }\n      });\n  },\n  methods: {\n    bricklayerInit() {\n      if(this.bricklayer) {\n        this.bricklayer.destroy();\n      }\n      this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n    },\n    onFilter(e) {\n      let validFilters = {};\n\n      for(let key in this.filters) {\n        if(this.filters[key]) {\n          validFilters[key] = this.filters[key];\n        }\n      }\n\n      let newFilteredMovies = [];\n\n      if(Object.keys(validFilters).length) {\n        newFilteredMovies = this.movies.filter(item => {\n          for(let key in validFilters) {\n            let isContainSearch = CONTAIN_SEARCH.includes(key);\n\n            if(isContainSearch) {\n              if(!item[key] || !item[key].toLowerCase().includes(validFilters[key].toLowerCase())) {\n                return false;\n              }\n            } else if((!item[key] || item[key].toLowerCase() != validFilters[key].toLowerCase())) {\n              return false;\n            }\n          }\n          return true;\n        });\n\n        this.isFilterApplied = true;\n\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...newFilteredMovies);\n        //this.bricklayerInit();\n      } else {\n        this.isFilterApplied = false;\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n        //this.bricklayerInit();\n      }\n\n      e.preventDefault();\n    },\n    clearFilter(e) {\n      this.filters = {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      }\n      this.isFilterApplied = false;\n      this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n      e.preventDefault();\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/pages"}]}