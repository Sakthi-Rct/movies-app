{"remainingRequest":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sakthivel/Desktop/movies-app/world-movies/src/pages/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/src/pages/Home.vue","mtime":1583311184384},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sakthivel/Desktop/movies-app/world-movies/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport movies from \"../data/movies.json\";\nimport MovieThumb from \"../components/movie-thumb.vue\";\nimport { GENRES, LANGUAGES, CONTAIN_SEARCH } from '../constants';\n\nexport default {\n  name: \"Home\",\n  components: {\n    MovieThumb\n  },\n  data() {\n    return {\n      movies: movies,\n      filteredMoives: movies.slice(),\n      GENRES: GENRES,\n      LANGUAGES: LANGUAGES,\n      isFilterApplied: false,\n      filters: {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      },\n      bricklayer: null\n    };\n  },\n  beforeCreate: function() {\n    if(!this.$parent.isAuthenticated) {\n      this.$router.push({ path: '/' });\n    }\n  },\n  mounted: function() {\n    this.$nextTick(function() {\n        if(this.$parent.isAuthenticated && this.movies.length) {\n          //this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n        }\n      });\n  },\n  methods: {\n    bricklayerInit() {\n      if(this.bricklayer) {\n        this.bricklayer.destroy();\n      }\n      this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n    },\n    onFilter(e) {\n      let validFilters = {};\n\n      for(let key in this.filters) {\n        if(this.filters[key]) {\n          validFilters[key] = this.filters[key];\n        }\n      }\n\n      let newFilteredMovies = [];\n\n      if(Object.keys(validFilters).length) {\n        newFilteredMovies = this.movies.filter(item => {\n          for(let key in validFilters) {\n            let isContainSearch = CONTAIN_SEARCH.includes(key);\n\n            if(isContainSearch) {\n              if(!item[key] || !item[key].toLowerCase().includes(validFilters[key].toLowerCase())) {\n                return false;\n              }\n            } else if((!item[key] || item[key].toLowerCase() != validFilters[key].toLowerCase())) {\n              return false;\n            }\n          }\n          return true;\n        });\n\n        this.isFilterApplied = true;\n\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...newFilteredMovies);\n        //this.bricklayerInit();\n      } else {\n        this.isFilterApplied = false;\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n        //this.bricklayerInit();\n      }\n\n      e.preventDefault();\n    },\n    clearFilter(e) {\n      this.filters = {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      }\n      this.isFilterApplied = false;\n      this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n      e.preventDefault();\n    }\n  }\n};\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <section class=\"hero is-primary\">\n      <div class=\"hero-body\">\n        <div class=\"container\">\n          <h1 class=\"title has-text-centered\">World Movies</h1>\n        </div>\n      </div>\n    </section>\n    <div class=\"hero is-light\">\n      <div class=\"container\">\n        <div class=\"section relative\">\n          <form class=\"columns\" @submit=\"onFilter\">\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by title</label>\n                <input name=\"filter-by-title\" class=\"input\" type=\"text\" v-model=\"filters.Title\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Year</label>\n                <input name=\"filter-by-year\" class=\"input\" type=\"text\" v-model=\"filters.Year\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by director</label>\n                <input name=\"filter-by-director\" class=\"input\" type=\"text\" v-model=\"filters.Director\">\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Genre</label>\n                <br>\n                <div class=\"select is-fullwidth\">\n                  <select name=\"filter-by-genre\" v-model=\"filters.Genre\">\n                    <option disabled value=\"\">Select one</option>\n                    <option v-for=\"(genre, i) in GENRES\" :key=\"i\" :value=\"genre.id\">{{genre.name}}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <div class=\"field\">\n                <label>Filter by Language</label>\n                <br>\n                <div class=\"select is-fullwidth\">\n                  <select name=\"filter-by-language\" v-model=\"filters.Language\">\n                    <option disabled value=\"\">Select one</option>\n                    <option v-for=\"(language, i) in LANGUAGES\" :key=\"i\" :value=\"language.id\">{{language.name}}</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-2\">\n              <label>&nbsp;</label>\n              <div class=\"field table remove-bg\">\n                <button name=\"filter\" class=\"button is-primary mr1\" type=\"submit\">Filter</button>\n                &nbsp;<a class=\"has-text-grey underline table-cell align-middle h5\" v-on:click=\"clearFilter\" v-if=\"isFilterApplied\" data-cy=\"clear-filter\">X Clear filter</a> \n              </div>\n            </div>\n          </form>\n          <div class=\"absolute has-text-info\" v-if=\"isFilterApplied && filteredMoives.length\">\n             Filter result: {{filteredMoives.length}} movie(s) found...\n            </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"section\">\n        <div class=\"bricklayer columns\">\n          <p v-if=\"!filteredMoives.length\">\n            No movies found...\n          </p>\n          <div class=\"column is-4\" v-for=\"(movie, i) in filteredMoives\" :key=\"i\">\n            <MovieThumb :movie=\"movie\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style src=\"../assets/libs/bricklayer/bricklayer.css\"></style>\n\n<script>\nimport movies from \"../data/movies.json\";\nimport MovieThumb from \"../components/movie-thumb.vue\";\nimport { GENRES, LANGUAGES, CONTAIN_SEARCH } from '../constants';\n\nexport default {\n  name: \"Home\",\n  components: {\n    MovieThumb\n  },\n  data() {\n    return {\n      movies: movies,\n      filteredMoives: movies.slice(),\n      GENRES: GENRES,\n      LANGUAGES: LANGUAGES,\n      isFilterApplied: false,\n      filters: {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      },\n      bricklayer: null\n    };\n  },\n  beforeCreate: function() {\n    if(!this.$parent.isAuthenticated) {\n      this.$router.push({ path: '/' });\n    }\n  },\n  mounted: function() {\n    this.$nextTick(function() {\n        if(this.$parent.isAuthenticated && this.movies.length) {\n          //this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n        }\n      });\n  },\n  methods: {\n    bricklayerInit() {\n      if(this.bricklayer) {\n        this.bricklayer.destroy();\n      }\n      this.bricklayer = new window.Bricklayer(document.querySelector(\".bricklayer\"));\n    },\n    onFilter(e) {\n      let validFilters = {};\n\n      for(let key in this.filters) {\n        if(this.filters[key]) {\n          validFilters[key] = this.filters[key];\n        }\n      }\n\n      let newFilteredMovies = [];\n\n      if(Object.keys(validFilters).length) {\n        newFilteredMovies = this.movies.filter(item => {\n          for(let key in validFilters) {\n            let isContainSearch = CONTAIN_SEARCH.includes(key);\n\n            if(isContainSearch) {\n              if(!item[key] || !item[key].toLowerCase().includes(validFilters[key].toLowerCase())) {\n                return false;\n              }\n            } else if((!item[key] || item[key].toLowerCase() != validFilters[key].toLowerCase())) {\n              return false;\n            }\n          }\n          return true;\n        });\n\n        this.isFilterApplied = true;\n\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...newFilteredMovies);\n        //this.bricklayerInit();\n      } else {\n        this.isFilterApplied = false;\n        this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n        //this.bricklayerInit();\n      }\n\n      e.preventDefault();\n    },\n    clearFilter(e) {\n      this.filters = {\n        Title: '',\n        Year: '',\n        Genre: '',\n        Director: '',\n        Language: ''\n      }\n      this.isFilterApplied = false;\n      this.filteredMoives.splice(0, this.filteredMoives.length, ...this.movies);\n      e.preventDefault();\n    }\n  }\n};\n</script>\n"]}]}